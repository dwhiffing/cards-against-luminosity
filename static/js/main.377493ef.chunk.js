(this["webpackJsonpincremental-2021"]=this["webpackJsonpincremental-2021"]||[]).push([[0],{191:function(e,t,n){},192:function(e,t,n){"use strict";n.r(t);var a=n(2),c=n.n(a),r=n(48),i=n.n(r),o=n(0),s=n(4),u=n(5),l=n(3),d=n(7),b=n(194),f={value:void 0,id:null,direction:0},j=200,m="\u25cf\xd7\u2702+\u21bb".split(""),p=["#333","#d40000","#33bb55","#3322aa"],O=100,v=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.value,n=void 0===t?1:t,a=e.color,c=void 0===a?0:a,r=e.suit,i=void 0===r?0:r,o=e.direction,s=void 0===o?0:o;return{value:n,color:c,suit:i,direction:s,id:Object(b.a)()}},h=function(e){var t,n,a,c=e.color,r=e.level;return 1===r&&(n=Object(u.shuffle)([0,0,1,1,2])[0],t=Object(u.shuffle)(0===n?[3,4,5]:1===n?[2,3]:[1])[0]),2===r&&(n=Object(u.shuffle)([0,1,2,3,4])[0],t=Object(u.shuffle)(0===n?[6,8,10,20]:1===n?[3,4,5]:2===n?[1]:[1,2,3])[0]),3===r&&(n=Object(u.shuffle)([1,2,3,4])[0],t=Object(u.shuffle)(0===n?[20,40,60,100]:1===n?[10,20,30]:2===n?[1]:[3,4,5])[0]),n>=1&&(1===r&&(a=Object(u.shuffle)([1,2,4,8])[0]),2===r&&(a=Object(u.shuffle)([1,2,3,4,5,6,7,8])[0]),3===r&&(a=Object(u.shuffle)([3,5,6,7,9,10,11,12,13,14,15])[0])),v({value:t,color:0===n?c:0,suit:n,direction:a})},y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1.07,n=arguments.length>2?arguments[2]:void 0;return Math.floor(e*Math.pow(t,n))},x=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:20;return[1].concat(Object(d.a)(new Array(n).fill("").map((function(n,a){return y(e,t,a)}))))},g={increaseMaxDraws:{title:"Increase Draw max",description:function(e){return"You can store up to ".concat(e+1," card draws.")},cost:{type:"red",levels:x(1,4,9).slice(1)},effect:{type:"change-limit",params:{name:"draw_cache",value:1}}},increaseHandSize:{title:"Increase Hand Size",description:function(e){return"Raise your max hand size to ".concat(e+2)},cost:{type:"green",levels:x(1,5,4).slice(1)},effect:{type:"change-limit",params:{name:"hand_size",value:1}}},increaseBoardSize:{title:"Increase Board Size",description:function(e){return"You can submit ".concat(e+2," cards at once.")},cost:{type:"blue",levels:x(5,2.2,23)},effect:{type:"change-limit",params:{name:"board_size",value:1}}},addRedCard:{title:"Add Common Red Card",description:function(e){return"Buy your ".concat(e+1,"nd common red card")},cost:{type:"red",levels:x(10,1.3,50).slice(1)},effect:{type:"add-card",params:{cardConfig:{color:1,level:1}}}},addGreenCard:{title:"Add Common Green Card",description:function(e){return"Buy your ".concat(e+1,"nd common green card")},cost:{type:"green",levels:x(10,1.3,50).slice(1)},effect:{type:"add-card",params:{cardConfig:{color:2,level:1}}}},addBlueCard:{title:"Add Common Blue Card",description:function(e){return"Buy your ".concat(e+1,"nd common blue card")},cost:{type:"blue",levels:x(10,1.3,50).slice(1)},effect:{type:"add-card",params:{cardConfig:{color:3,level:1}}}},decreaseDrawTime:{title:"Decrease Draw Time",description:function(e){return"Decrease your draw time to ".concat((5-.4*(e+1)).toFixed(1)," seconds")},cost:{type:"red",levels:x(3,1.6,10).slice(1)},effect:{type:"change-limit",params:{name:"draw_time",value:-2}}},decreaseSubmitTime:{title:"Decrease Submit Time",description:function(e){return"Decrease your submit time to ".concat((5-.4*(e+1)).toFixed(1)," seconds")},cost:{type:"blue",levels:x(3,1.6,10).slice(1)},effect:{type:"change-limit",params:{name:"submit_time",value:-2}}},increaseMaxSubmits:{title:"Increase Submit max",description:function(e){return"You can store up to ".concat(e+2," card submits.")},cost:{type:"blue",levels:x(3,1.6,9).slice(1)},effect:{type:"change-limit",params:{name:"submit_cache",value:1}}},autoDraw:{title:"Auto Draw",description:function(e){return"Use your draws automatically"},cost:{type:"red",levels:[100]},effect:{type:"change-limit",params:{name:"draw_auto",value:1}}},autoSubmit:{title:"Auto Submit",description:function(e){return"Use your submits automatically"},cost:{type:"blue",levels:[100]},effect:{type:"change-limit",params:{name:"submit_auto",value:1}}},autoPlay:{title:"Auto Play",description:function(e){return"Play a card from your hand automatically every 5 seconds"},cost:{type:"green",levels:[100]},effect:{type:"change-limit",params:{name:"play_auto",value:1}}},addRedUncommonCard:{title:"Add Uncommon Red Card",description:function(e){return"Buy your ".concat(e+1,"nd uncommon red card")},cost:{type:"red",levels:x(100,1.5,50).slice(1)},effect:{type:"add-card",params:{cardConfig:{color:1,level:2}}}},addGreenUncommonCard:{title:"Add Uncommon Green Card",description:function(e){return"Buy your ".concat(e+1,"nd uncommon green card")},cost:{type:"green",levels:x(100,1.5,50).slice(1)},effect:{type:"add-card",params:{cardConfig:{color:2,level:2}}}},addBlueUncommonCard:{title:"Add Uncommon Blue Card",description:function(e){return"Buy your ".concat(e+1,"nd uncommon blue card")},cost:{type:"blue",levels:x(100,1.5,50).slice(1)},effect:{type:"add-card",params:{cardConfig:{color:3,level:2}}}},addRedRareCard:{title:"Add Rare Red Card",description:function(e){return"Buy your ".concat(e+1,"nd rare red card")},cost:{type:"red",levels:x(500,1.6,50).slice(1)},effect:{type:"add-card",params:{cardConfig:{color:1,level:2}}}},addGreenRareCard:{title:"Add Rare Green Card",description:function(e){return"Buy your ".concat(e+1,"nd rare green card")},cost:{type:"green",levels:x(500,1.6,50).slice(1)},effect:{type:"add-card",params:{cardConfig:{color:2,level:2}}}},addBlueRareCard:{title:"Add Rare Blue Card",description:function(e){return"Buy your ".concat(e+1,"nd rare blue card")},cost:{type:"blue",levels:x(500,1.6,50).slice(1)},effect:{type:"add-card",params:{cardConfig:{color:3,level:3}}}}},_=Object.entries(g).reduce((function(e,t){var n=Object(s.a)(t,2),a=n[0],c=n[1];return Object(o.a)(Object(o.a)({},e),{},Object(l.a)({},a,Object(o.a)(Object(o.a)({},c),{},{name:a})))}),{}),w={red:Object.values(_).filter((function(e){return"red"===e.cost.type})),green:Object.values(_).filter((function(e){return"green"===e.cost.type})),blue:Object.values(_).filter((function(e){return"blue"===e.cost.type}))},C=[v({value:1,color:1,suit:0}),v({value:1,color:2,suit:0}),v({value:1,color:3,suit:0}),v({value:2,color:1,suit:0}),v({value:2,color:2,suit:0}),v({value:2,color:3,suit:0}),v({value:3,color:1,suit:0}),v({value:3,color:2,suit:0}),v({value:3,color:3,suit:0})],L=function(){var e=C;return{store:{open:0},purchases:{},limits:{prestige:1,hand_size:1,draw_count:1,draw_auto:0,submit_auto:0,play_auto_time:5,play_auto:0,draw_cache:1,submit_cache:1,board_size:1,draw_time:25,submit_time:25},auto_play:{draw:!1,submit:!1,play:!1},counters:{play_time:0,draw_time:0,submit_time:0,draw_cache:0,submit_cache:0},points:{red:0,green:0,blue:0},max_points:{red:0,green:0,blue:0},seen_upgrades:{},cards:{board:S(1),draw:e,discard:[],hand:[]}}},S=function(e){return new Array(e).fill("").slice(0,e).map((function(){return{id:Object(b.a)()}}))},k=n(11),A=n(12),z=n.n(A),M=n(26),E=n(76),R=n.n(E),B=n(50),I=function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},c=n.list,r=n.index,i=Object(B.a)(n,["list","index"]),s=a.list,u=a.index,d=Object(B.a)(a,["list","index"]),b=Object(o.a)(Object(o.a)({},e),{},{cards:Object(o.a)(Object(o.a)({},e.cards),{},(t={},Object(l.a)(t,c,(e.cards[c]||[]).map((function(e,t){return t===+r?d:e}))),Object(l.a)(t,s,(e.cards[s]||[]).map((function(e,t){return t===+u?i:c===s&&t===+r?d:e}))),t))});return b.cards.hand=b.cards.hand.filter((function(e){return!!e.value})),b},D=function(e){return+new Date-+e<250},N=function(e){var t=e.cards.board.map((function(e,t){return Object(o.a)(Object(o.a)({},e),{},{index:t,_value:e.value,_color:e.color})})).filter((function(e){return e.value>0})),n=Object(u.groupBy)(t,(function(e){return e.suit})),a=n[0],c=void 0===a?[]:a,r=n[1],i=void 0===r?[]:r,d=n[2],b=void 0===d?[]:d,j=n[3],m=void 0===j?[]:j,p=n[4],O=function(n,a){X(e,n).forEach((function(e){var n=t.find((function(t){return e.id===t.id}));n&&a(n)}))};return(void 0===p?[]:p).forEach((function(e){return O(e,(function(t){t._hp=e._value}))})),m.forEach((function(e){return O(e,(function(t){t.value+=e._value}))})),i.forEach((function(e){return O(e,(function(t){t._value*=e._value}))})),e=Object(o.a)(Object(o.a)({},e),{},{cards:Object(o.a)(Object(o.a)({},e.cards),{},{board:e.cards.board.map((function(e){return t.find((function(t){return t.id===e.id}))||e}))}),points:T(e,c)}),e=Object(o.a)(Object(o.a)({},e),{},{max_points:{red:Math.max(e.max_points.red,e.points.red),green:Math.max(e.max_points.green,e.points.green),blue:Math.max(e.max_points.blue,e.points.blue)}}),b.forEach((function(t){return O(t,(function(t){e.cards=Object.entries(Object(o.a)({},e.cards)).reduce((function(e,n){var a=Object(s.a)(n,2),c=a[0],r=a[1];return Object(o.a)(Object(o.a)({},e),{},Object(l.a)({},c,r.map((function(e){return e.id!==t.id?e:Object(o.a)(Object(o.a)({},f),{},{id:e.id})}))))}),{})}))})),e=Object(o.a)(Object(o.a)({},Y(e)),{},{counters:Object(o.a)(Object(o.a)({},e.counters),{},{submit_cache:e.counters.submit_cache-1})})},Y=function(e){return Object(o.a)(Object(o.a)({},e),{},{cards:Object(o.a)(Object(o.a)({},e.cards),{},{board:e.cards.board.map((function(e){return e.value>0&&!e._hp?Object(o.a)(Object(o.a)({},e),f):Object(o.a)(Object(o.a)({},e),{},{_hp:(e._hp||1)-1})})),discard:[].concat(Object(d.a)(e.cards.discard),Object(d.a)(e.cards.board.filter((function(e){return e.value>0&&!e._hp})).map((function(e){return Object(o.a)(Object(o.a)({},e),{},{_value:void 0,_color:void 0,index:void 0})}))))})})},T=function(e,t){return t.reduce((function(t,n){return 1===n._color&&(t.red+=Math.round(n._value*e.limits.prestige)),2===n._color&&(t.green+=Math.round(n._value*e.limits.prestige)),3===n._color&&(t.blue+=Math.round(n._value*e.limits.prestige)),t}),Object(o.a)({},e.points))},X=function(e,t){var n=e.cards.board,a=me(e.limits.board_size),c=t.index,r=q(t.direction),i=Object(s.a)(r,4),o=i[0],u=i[1],l=i[2],d=i[3],b=[];return o&&b.push(n[c-a]),u&&c%a!==a-1&&b.push(n[c+1]),l&&b.push(n[c+a]),d&&c%a!==0&&b.push(n[c-1]),b.filter((function(e){return(null===e||void 0===e?void 0:e.value)>0}))},U=function(e,t,n){var a,c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:n.length,i=Object(d.a)(e.cards[t]||[]).find((function(e,t){return t===c})),s=Object(d.a)(e.cards[t]||[]).filter((function(e,t){return t!==c})),u=e.cards[n]||[];return Object(o.a)(Object(o.a)({},e),{},{cards:Object(o.a)(Object(o.a)({},e.cards),{},(a={},Object(l.a)(a,t,s),Object(l.a)(a,n,[].concat(Object(d.a)(u.slice(0,r)),[i],Object(d.a)(u.slice(r)))),a))})},Z=function(e,t){return e.purchases[t.name]||0},F=function(e,t){return{type:t.cost.type,value:t.cost.levels[Z(e,t)]}},G=function(e,t){var n=F(e,t);return e.points[n.type]>=n.value},J=function(e){return e.cards.draw.length>0?e.cards.hand.length<e.limits.hand_size&&(e=Object(o.a)({},U(e,"draw","hand"))):(e=Object(o.a)({},H(e))).cards.draw.length>0&&e.cards.hand.length<e.limits.hand_size&&(e=Object(o.a)({},U(e,"draw","hand"))),e=Object(o.a)(Object(o.a)({},e),{},{counters:Object(o.a)(Object(o.a)({},e.counters),{},{draw_cache:e.counters.draw_cache-1})})},P=function(e){return 0===e.counters.draw_time?e=Object(o.a)(Object(o.a)({},e),{},{counters:Object(o.a)(Object(o.a)({},e.counters),{},{draw_cache:e.counters.draw_cache+1,draw_time:e.limits.draw_time})}):e.counters.draw_cache<e.limits.draw_cache&&(e=Object(o.a)(Object(o.a)({},e),{},{counters:Object(o.a)(Object(o.a)({},e.counters),{},{draw_time:e.counters.draw_time-1})})),0===e.counters.submit_time?e=Object(o.a)(Object(o.a)({},e),{},{counters:Object(o.a)(Object(o.a)({},e.counters),{},{submit_cache:e.counters.submit_cache+1,submit_time:e.limits.submit_time})}):e.counters.submit_cache<e.limits.submit_cache&&(e=Object(o.a)(Object(o.a)({},e),{},{counters:Object(o.a)(Object(o.a)({},e.counters),{},{submit_time:e.counters.submit_time-1})})),0===e.counters.play_time?e.auto_play.play&&e.cards.hand.length>0&&e.cards.board.filter((function(e){return!e.value})).length>0&&(e=Object(o.a)(Object(o.a)({},K(e,Object(o.a)(Object(o.a)({},e.cards.hand[0]),{},{list:"hand",index:0}))),{},{counters:Object(o.a)(Object(o.a)({},e.counters),{},{play_time:e.limits.play_auto_time})})):e=Object(o.a)(Object(o.a)({},e),{},{counters:Object(o.a)(Object(o.a)({},e.counters),{},{play_time:e.counters.play_time-1})}),e.counters.draw_cache>0&&e.auto_play.draw&&e.cards.hand.length<e.limits.hand_size&&(e=J(e)),e.counters.submit_cache>0&&e.auto_play.submit&&e.cards.board.filter((function(e){return!!e.value})).length>0&&(e=N(e)),e},H=function(e){return Object(o.a)(Object(o.a)({},e),{},{cards:Object(o.a)(Object(o.a)({},e.cards),{},{draw:e.cards.discard,discard:[]})})},W=function(e,t){Object(a.useEffect)((function(){return window.addEventListener(e,t),function(){return window.removeEventListener(e,t)}}),[e,t])};function V(e,t){var n=Object(a.useRef)();Object(a.useEffect)((function(){n.current=e})),Object(a.useEffect)((function(){var e=setInterval((function(){n.current()}),t);return function(){return clearInterval(e)}}),[t])}var q=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=e;return new Array(8).fill("").map((function(e,n){return t>>n&1}))},K=function(e,t){if(e.cards.board.every((function(e){return!!e.value})))return e;var n=e.cards.board.findIndex((function(e){return!e.value}));return t?I(e,{list:"board",index:n},t):e},Q=function(){var e=Object(M.a)(z.a.mark((function e(t,n){var a;return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,localStorage.getItem("__incremental_data");case 2:return a=e.sent,a=Object(o.a)(Object(o.a)({},JSON.parse(a||"{}")),{},Object(l.a)({},t,n)),e.next=6,localStorage.setItem("__incremental_data",JSON.stringify(a));case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),$=function(){var e=Object(M.a)(z.a.mark((function e(){var t,n,a,c,r;return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,localStorage.getItem("__incremental_data");case 2:if(t=e.sent,n={},null!==t)for(c in a=JSON.parse(t))r=a[c],n[c]=r;return e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ee=function(){var e=Object(M.a)(z.a.mark((function e(t){var n;return z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,localStorage.getItem("__incremental_data");case 2:return n=e.sent,e.next=5,localStorage.setItem("__incremental_data",JSON.stringify(R()(JSON.parse(n||"{}"),[t])));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),te=n(1),ne=function(e){var t=e.direction,n=q(void 0===t?0:t),a=Object(s.a)(n,8),c=a[0],r=a[1],i=a[2],o=a[3],u=a[4],l=a[5],d=a[6],b=a[7];return Object(te.jsxs)("svg",{width:"26",height:"26",viewBox:"0 0 26 26",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{width:30},children:[Object(te.jsxs)("g",{clipPath:"url(#clip0)",children:[o&&Object(te.jsx)("path",{d:"M4.33333 15.7314L4.33333 13.6373L8.49333 13.6464L8.49333 12.3536L4.33333 12.3627L4.33333 10.2686L6.92497e-07 13L4.33333 15.7314Z",fill:"black"}),r&&Object(te.jsx)("path",{d:"M21.6667 12.3627V10.2686L26 13L21.6667 15.7314L21.6667 13.6373L17.5067 13.6464V12.3536L21.6667 12.3627Z",fill:"black"}),i&&Object(te.jsx)("path",{d:"M13.6373 21.6667L15.7314 21.6667L13 26L10.2686 21.6667L12.3627 21.6667L12.3536 17.5067H13.6464L13.6373 21.6667Z",fill:"black"}),c&&Object(te.jsx)("path",{d:"M12.3627 4.33333L10.2686 4.33333L13 9.53674e-07L15.7314 4.33333L13.6373 4.33333L13.6464 8.49333H12.3536L12.3627 4.33333Z",fill:"black"}),b&&Object(te.jsx)("path",{d:"M7.24583 8.217L5.65034 9.81249L5 5L9.81249 5.65034L8.217 7.24583L10.8461 9.86104L9.86104 10.8461L7.24583 8.217Z",fill:"black"}),d&&Object(te.jsx)("path",{d:"M8.21699 18.7542L9.81249 20.3497L5 21L5.65033 16.1875L7.24582 17.783L9.86104 15.1539L10.8461 16.139L8.21699 18.7542Z",fill:"black"}),l&&Object(te.jsx)("path",{d:"M18.7542 17.783L20.3497 16.1875L21 21L16.1875 20.3497L17.783 18.7542L15.1539 16.139L16.139 15.1539L18.7542 17.783Z",fill:"black"}),u&&Object(te.jsx)("path",{d:"M16.1875 5.65034L17.783 7.24583L15.1539 9.86105L16.139 10.8461L18.7542 8.217L20.3497 9.81249L21 5L16.1875 5.65034Z",fill:"black"})]}),Object(te.jsx)("defs",{children:Object(te.jsx)("clipPath",{id:"clip0",children:Object(te.jsx)("rect",{width:"26",height:"26",fill:"white"})})})]})},ae=c.a.memo((function(e){var t=e.card,n=e.handSize,a=void 0===n?0:n,c=e.boardSize,r=void 0===c?1:c,i=e.isActive,s=e.cursorState,u=e.style,l=void 0===u?{}:u,d=window.innerWidth/2,b=window.innerHeight/2,f=0,j=0;"hand"===t.list&&(f=d-a/2*O,j=b/.7,f+=t.index*O),"board"===t.list&&(f=d-r/2*O,j=b/5+(5-r)/2*O,f+=t.index%r*O,j+=Math.floor(t.index/r)*O),"draw"===t.list&&(f=d-400,j=b/.7),"discard"===t.list&&(f=d+300,j=b/.7),f=i?s.mouseX:f,j=i?s.mouseY:j;var v={stiffness:200,damping:20},h=t.value>-1?Object(k.spring)(f,v):f,y=t.value>-1?Object(k.spring)(j,v):j,x=Object(k.spring)(0,v),g=Object(k.spring)(i?1.185:1,v),_=Object(k.spring)(t.value>-1?1:0,v),w=m[t.suit],C=p[t._color||t.color],L="draw"===t.list,S="number"!==typeof t.value,A=("draw"===t.list||"discard"===t.list||!t.list)&&!t.index,z=["card can-move rank".concat(t.value),(S||A)&&"shadow",L&&"hidden",(i||"draw"===t.list||"discard"===t.list)&&"disable-touch",S&&"empty",w];return Object(te.jsx)(k.Motion,{style:{x:h,y:y,r:x,s:g,o:_},children:function(e){var n=e.x,a=e.y,c=e.r,r=e.s,s=e.o;return Object(te.jsxs)("div",{"data-index":t.index,"data-list":t.list,"data-value":t.value,className:z.join(" "),style:Object(o.a)({transform:"translate3d(".concat(n,"px, ").concat(a,"px, 0) rotate(").concat(c,"deg) scale(").concat(r,")"),backgroundColor:"rgba(255,255,255,".concat(s,")"),zIndex:i?20:S?0:10,color:C,display:"flex",justifyContent:"center",alignItems:"center"},l),children:[Object(te.jsx)("div",{className:"value",children:t.value}),"number"===typeof t.value&&w&&Object(te.jsx)("div",{className:"face",children:w}),t._hp&&t._hp>0?Object(te.jsx)("div",{className:"hp",children:t._hp}):null,t.direction>0&&Object(te.jsx)(ne,{direction:t.direction}),Object(te.jsx)("div",{className:"back"}),Object(te.jsx)("div",{className:"click"})]})}})}));function ce(e){var t=e.onSave,n=e.onReset,a=e.onSubmit,c=e.onDraw,r=e.setState,i=e.state;return Object(te.jsxs)("footer",{children:[Object(te.jsx)("div",{style:{flex:1,alignItems:"flex-end",display:"flex",justifyContent:"flex-start"},children:Object(te.jsx)("button",{onClick:function(){return r((function(e){return Object(o.a)(Object(o.a)({},e),{},{modal:{name:"deck"}})}))},children:"Deck"})}),Object(te.jsxs)("div",{style:{flex:1,display:"flex",alignItems:"flex-end",justifyContent:"center"},children:[Object(te.jsx)(re,{cache:i.counters.draw_cache,time:i.counters.draw_time,allowAuto:i.limits.draw_auto,autoEnabled:i.auto_play.draw,setAutoEnabled:function(e){return r(Object(o.a)(Object(o.a)({},i),{},{auto_play:Object(o.a)(Object(o.a)({},i.auto_play),{},{draw:e})}))},cacheMax:i.limits.draw_cache,totalTime:i.limits.draw_time,onClick:c,disabled:i.cards.hand.length===i.limits.hand_size,children:"Draw"}),Object(te.jsx)(re,{cache:i.counters.submit_cache,allowAuto:i.limits.submit_auto,autoEnabled:i.auto_play.submit,setAutoEnabled:function(e){return r(Object(o.a)(Object(o.a)({},i),{},{auto_play:Object(o.a)(Object(o.a)({},i.auto_play),{},{submit:e})}))},cacheMax:i.limits.submit_cache,time:i.counters.submit_time,totalTime:i.limits.submit_time,onClick:a,disabled:0===i.cards.board.filter((function(e){return!!e.value})).length,children:"Submit"}),i.limits.play_auto>0&&Object(te.jsx)(re,{allowAuto:!0,autoEnabled:i.auto_play.play,setAutoEnabled:function(e){return r(Object(o.a)(Object(o.a)({},i),{},{auto_play:Object(o.a)(Object(o.a)({},i.auto_play),{},{play:e})}))},time:i.counters.play_time,totalTime:i.limits.play_auto_time,disabled:!0,children:"Autoplay"})]}),Object(te.jsxs)("div",{style:{flex:1,display:"flex",alignItems:"flex-end",justifyContent:"flex-end"},children:[Object(te.jsx)("button",{onClick:t,children:"save"}),Object(te.jsx)("button",{onClick:n,children:"reset"})]})]})}var re=function(e){var t=e.cache,n=e.cacheMax,a=e.time,c=e.autoEnabled,r=e.setAutoEnabled,i=e.allowAuto,o=e.totalTime,s=e.children,u=e.onClick,l=e.disabled;return Object(te.jsxs)("div",{style:{width:"3rem",height:"2rem",display:"flex",flexDirection:"column",justifyContent:"space-between",alignItems:"center"},children:[Object(te.jsxs)("p",{style:{fontSize:".5rem",margin:0,textAlign:"center"},children:[(a/5).toFixed(1),"/",(o/5).toFixed(1)]}),n>0&&Object(te.jsxs)("p",{style:{fontSize:".5rem",margin:0,textAlign:"center"},children:[t,"/",n]}),Object(te.jsxs)("div",{style:{display:"flex",flexDirection:"row"},children:[Object(te.jsx)("button",{disabled:0===t||l,onClick:u,children:s}),!!i&&Object(te.jsx)("input",{type:"checkbox",checked:!!c,onChange:function(){return r(!c)}})]})]})};function ie(e){var t=e.state,n=e.setModal,a=w.red.filter((function(e){return!Object.keys(t.seen_upgrades).includes(e.name)&&G(t,e)})),c=w.green.filter((function(e){return!Object.keys(t.seen_upgrades).includes(e.name)&&G(t,e)})),r=w.blue.filter((function(e){return!Object.keys(t.seen_upgrades).includes(e.name)&&G(t,e)}));return Object(te.jsxs)("header",{children:[Object(te.jsx)("div",{style:{flex:1,display:"flex"},children:Object(te.jsx)("span",{style:{fontSize:".5rem"},children:"Cards Against Luminosity"})}),Object(te.jsxs)("div",{style:{flex:1,display:"flex",justifyContent:"center"},children:[Object(te.jsx)("p",{style:{color:p[1],margin:"0px 10px"},children:t.points.red}),Object(te.jsx)("p",{style:{color:p[2],margin:"0px 10px"},children:t.points.green}),Object(te.jsx)("p",{style:{color:p[3],margin:"0px 10px"},children:t.points.blue})]}),Object(te.jsxs)("div",{style:{flex:1,display:"flex",flexDirection:"column",alignItems:"flex-end",justifyContent:"center"},children:[t.max_points.red>0&&Object(te.jsxs)("button",{onClick:function(){return n({name:"store",type:"red"})},children:["Red Store"," ",a.length>0?"(".concat(a.length,")"):""]}),t.max_points.green>0&&Object(te.jsxs)("button",{onClick:function(){return n({name:"store",type:"green"})},children:["Green Store"," ",c.length>0?"(".concat(c.length,")"):""]}),t.max_points.blue>0&&Object(te.jsxs)("button",{onClick:function(){return n({name:"store",type:"blue"})},children:["Blue Store"," ",r.length>0?"(".concat(r.length,")"):""]})]})]})}var oe=n(49),se=n.n(oe);function ue(e){var t=e.state,n=e.setState,a=e.onClose,c=t.modal||{},r=c.name,i=c.type,o=w[i]||[];return Object(te.jsxs)(se.a,{isOpen:!!r,onRequestClose:a,overlayClassName:"Overlay",style:fe,children:[Object(te.jsx)("div",{style:{display:"flex",flexWrap:"wrap",justifyContent:"center",marginTop:"1rem"},children:"store"===r?Object(te.jsx)(de,{state:t,setState:n,purchases:o}):"addCard"===r?Object(te.jsx)(le,{state:t,setState:n}):Object(te.jsx)(be,{state:t})}),Object(te.jsx)("button",{onClick:a,children:"close"})]})}se.a.setAppElement("#root");var le=function(e){var t,n=e.state,c=e.setState,r=Object(a.useState)((t=n.modal.cardConfig,[h(t),h(t),h(t)])),i=Object(s.a)(r,1)[0];return Object(te.jsxs)("div",{children:[Object(te.jsx)("p",{children:"Add card"}),Object(te.jsx)("div",{style:{display:"flex"},children:i.map((function(e,t){return Object(te.jsxs)("div",{children:[Object(te.jsx)("div",{style:{marginRight:".25rem",position:"relative",width:"2rem",height:"2rem"},children:Object(te.jsx)(ae,{card:e})}),Object(te.jsx)("button",{onClick:function(){c((function(t){return Object(o.a)(Object(o.a)({},t),{},{modal:null,cards:Object(o.a)(Object(o.a)({},t.cards),{},{discard:t.cards.discard.concat([e])})})}))},children:"pick"})]},e.id)}))})]})},de=function(e){var t=e.state,n=e.setState,c=e.purchases,r=(e.afford,c.filter((function(e){return G(t,e)||Object.keys(t.seen_upgrades).includes(e.name)})));return Object(a.useEffect)((function(){var e=r.reduce((function(e,t){return Object(o.a)(Object(o.a)({},e),{},Object(l.a)({},t.name,!0))}),{});n((function(t){return Object(o.a)(Object(o.a)({},t),{},{seen_upgrades:Object(o.a)(Object(o.a)({},t.seen_upgrades),e)})}))}),[]),r.map((function(e){var a=F(t,e),c=G(t,e),r=Z(t,e);return Object(te.jsxs)("div",{style:{display:"flex",flexDirection:"column",justifyContent:"center",textAlign:"center",width:"4rem",height:"2rem",margin:10},children:[Object(te.jsx)("p",{style:{fontSize:".4rem",margin:0},children:e.title}),e.description&&Object(te.jsx)("p",{style:{fontSize:".25rem",margin:"5px 0"},children:"number"===typeof a.value?e.description(r):e.description(r-1)}),Object(te.jsx)("button",{disabled:"number"!==typeof a.value||!c,onClick:function(){c?n((function(t){return function(e,t){var n,a,c=F(e,t),r=Object(o.a)({},e.points),i=Object(o.a)({},e.cards),u=Object(o.a)({},e.limits);if(r[c.type]-=c.value,"add-points"===t.effect.type&&(r=Object.entries(r).reduce((function(e,n){var a=Object(s.a)(n,2),c=a[0],r=a[1];return Object(o.a)(Object(o.a)({},e),{},Object(l.a)({},c,r+t.effect.params.value))}),{})),"add-card"===t.effect.type&&(e.modal={name:"addCard",cardConfig:t.effect.params.cardConfig}),"change-limit"===t.effect.type&&(null===(n=t.effect)||void 0===n||null===(a=n.params)||void 0===a?void 0:a.name)){var d,b,f=(null===(d=t.effect)||void 0===d||null===(b=d.params)||void 0===b?void 0:b.value)||0;if(u[t.effect.params.name]+=f,"board_size"===t.effect.params.name){var j=S(u[t.effect.params.name]);i.board=j.map((function(e,t){return i.board[t]||e}))}}return"remove-card"===t.effect.type&&(i=Object.entries(Object(o.a)({},i)).reduce((function(e,n){var a=Object(s.a)(n,2),c=a[0],r=a[1];return Object(o.a)(Object(o.a)({},e),{},Object(l.a)({},c,r.filter((function(e){return e.id!==t.effect.params.id}))))}),{})),"upgrade-card"===t.effect.type&&(i=Object.entries(Object(o.a)({},i)).reduce((function(e,n){var a=Object(s.a)(n,2),c=a[0],r=a[1];return Object(o.a)(Object(o.a)({},e),{},Object(l.a)({},c,r.map((function(e){return e.id===t.effect.params.id?Object(o.a)(Object(o.a)({},e),{},{value:e.value+1}):e}))))}),{})),Object(o.a)(Object(o.a)({},e),{},{purchases:Object(o.a)(Object(o.a)({},e.purchases),{},Object(l.a)({},t.name,(e.purchases[t.name]||0)+1)),limits:u,cards:i,points:r})}(t,e)})):alert("You can't afford it")},children:"number"===typeof a.value?"Buy (".concat(a.value," ").concat(a.type,")"):"Max"},e.title)]},e.title)}))};function be(e){var t=e.state,n=Object.values(t.cards).flat().filter((function(e){return!!(null===e||void 0===e?void 0:e.value)}));return Object(te.jsx)("div",{style:{display:"flex",flexWrap:"wrap"},children:n.map((function(e){return Object(te.jsx)("div",{children:Object(te.jsx)(ae,{card:e,style:{position:"relative",marginTop:8,marginRight:8}})},e.id)}))})}var fe={content:{top:"50%",left:"50%",right:"auto",bottom:"auto",marginRight:"-50%",transform:"translate(-50%, -50%)",maxWidth:"10rem",width:"100%",zIndex:99999}},je=function(){var e=Object(a.useState)(null),t=Object(s.a)(e,2),n=t[0],c=t[1],r=function(e){var t=Object(a.useState)({mouseY:0,mouseX:0}),n=Object(s.a)(t,2),c=n[0],r=n[1],i=Object(a.useRef)({x:0,y:0});return W("pointermove",(function(e){var t=e.clientY,n=e.clientX;r({mouseX:n,mouseY:t})})),W("pointerdown",(function(t){var n,a=t.clientX,c=t.clientY,o=document.elementFromPoint(a,c);console.log(o),(null===(n=o)||void 0===n?void 0:n.classList.contains("click"))&&(o=o.parentElement),i.current.x=a,i.current.y=c,e({clientX:a,clientY:c,element:o}),r({mouseX:a,mouseY:c})})),W("pointerup",(function(t){var n,a=t.clientX,c=t.clientY,r=document.elementFromPoint(a,c);(null===(n=r)||void 0===n?void 0:n.classList.contains("click"))&&(r=r.parentElement),(i.current.x-a>10||i.current.y-c>10)&&e({clientX:a,clientY:c,element:r})})),{cursorState:c}}(function(e,t){var n=Object(a.useRef)(0);return function(a){var c=a.element;if(c){var r=c.dataset,i=r.list,s=r.index;if(!i)return D(n.current)&&t(K(e,e.activeCard)),t((function(e){return Object(o.a)(Object(o.a)({},e),{},{activeCard:null})}));var u=Object(o.a)(Object(o.a)({},e.cards[i][+s]),{},{list:i,index:+s});e.activeCard?t((function(e){return Object(o.a)(Object(o.a)({},I(e,u,e.activeCard)),{},{activeCard:null})})):u.value>-1&&(n.current=new Date,t((function(e){return Object(o.a)(Object(o.a)({},e),{},{activeCard:u})})))}}}(n,c)).cursorState;Object(a.useEffect)((function(){$("save").then((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.save;c(t||L())}))}),[]);var i=function(e){return c((function(t){return Object(o.a)(Object(o.a)({},t),{},{modal:e})}))};if(W("resize",Object(u.debounce)(function(){var e=Object(a.useState)(0),t=Object(s.a)(e,2)[1];return function(){return t((function(e){return++e}))}}(),500)),V((function(){return c(P)}),j),V((function(){return c((function(e){return Q("save",e),e}))}),5e3),!n)return null;var l=Object.entries(n.cards).map((function(e){var t=Object(s.a)(e,2),n=t[0];return t[1].map((function(e,t){return Object(o.a)(Object(o.a)({},e),{},{index:t,list:n})}))})).flat(),d=l.filter((function(e){return"hand"===e.list})).length;return Object(te.jsxs)(te.Fragment,{children:[Object(te.jsx)(ie,{state:n,setModal:i}),Object(te.jsx)(ue,{state:n,setState:c,onClose:function(){return i()}}),Object(te.jsx)("div",{className:"cards-container",children:l.map((function(e){var t,a=(null===(t=n.activeCard)||void 0===t?void 0:t.id)===e.id&&e.value>-1;return Object(te.jsx)(ae,{card:e,handSize:d,boardSize:me(n.limits.board_size),isActive:a,cursorState:r},e.id||"empty"+e.index)}))}),Object(te.jsx)(ce,{onSave:function(){return Q("save",n)},onReset:function(){ee("save"),window.location.reload()},onSubmit:function(){return c(N)},onDraw:function(){return c(J)},setState:c,state:n})]})},me=function(e){return e>=17?5:e>=10?4:e>4?3:e>=2?2:1};n(191);i.a.render(Object(te.jsx)(c.a.StrictMode,{children:Object(te.jsx)("div",{className:"container",children:Object(te.jsx)(je,{})})}),document.getElementById("root"))}},[[192,1,2]]]);
//# sourceMappingURL=main.377493ef.chunk.js.map