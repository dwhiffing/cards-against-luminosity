{"version":3,"sources":["constants.js","utils/swapCards.js","utils/useMouse.js","utils/scoreCards.js","utils/moveCard.js","utils/doPurchase.js","utils/draw.js","utils/doCounters.js","utils/index.js","components/Arrows.js","components/Card.js","components/Footer.js","components/Header.js","components/Modal.js","components/App.js","index.js"],"names":["emptyCard","value","undefined","id","direction","TICK","SUITS","split","COLORS","CARD_HEIGHT","getNewCard","color","suit","uuid","getCardWithRarity","level","shuffle","getPrice","baseCost","priceRatio","Math","floor","pow","getPrices","maxLevel","Array","fill","map","_","BASEUPGRADES","increaseMaxDraws","title","description","l","cost","type","levels","slice","effect","params","name","increaseHandSize","increaseBoardSize","addRedCard","cardConfig","addGreenCard","addBlueCard","decreaseDrawTime","draw_time","toFixed","decreaseSubmitTime","increaseMaxSubmits","autoDraw","autoSubmit","autoPlay","addRedUncommonCard","addGreenUncommonCard","addBlueUncommonCard","addRedRareCard","addGreenRareCard","addBlueRareCard","UPGRADES","Object","entries","reduce","obj","k","v","STORES","red","values","filter","u","green","blue","CARDS","getInitialState","shuffled","store","open","purchases","limits","prestige","hand_size","draw_count","draw_auto","submit_auto","play_auto_time","play_auto","draw_cache","submit_cache","board_size","submit_time","auto_play","draw","submit","play","counters","play_time","points","max_points","seen_upgrades","cards","board","getBoard","discard","hand","size","swapCards","state","a","b","l1","list","i1","index","s1","l2","i2","s2","result","c","i","isDoubleClick","date","Date","scoreCards","scoredCards","_value","_color","cardGroups","groupBy","pointCards","multiCards","removeCards","upgradeCards","applyEffect","card","getCardsInDirection","forEach","target","find","pc","_hp","addCardScores","max","constants","discardBoard","sum","current","round","s","getBoardWidth","p","getDirections","t","r","push","moveCard","source","destination","sourceIndex","destIndex","length","newSource","dest","getCurrentLevel","purchase","getCost","getCanAfford","shuffleDiscard","doCounters","utils","useWindowEvent","event","callback","useEffect","window","addEventListener","removeEventListener","useInterval","delay","savedCallback","useRef","setInterval","clearInterval","n","autoplayCard","every","findIndex","writeToStorage","queryKey","data","localStorage","getItem","storageData","JSON","parse","setItem","stringify","readFromStorage","queriesWithData","removeFromStorage","key","omit","Arrows","tr","br","bl","tl","width","height","viewBox","xmlns","style","clipPath","d","Card","React","memo","handSize","boardSize","isActive","cursorState","w","innerWidth","h","innerHeight","_x","_y","mouseX","mouseY","config","stiffness","damping","x","spring","y","o","isHidden","isEmpty","isBottom","classes","data-index","data-list","data-value","className","join","transform","backgroundColor","zIndex","display","justifyContent","alignItems","Footer","onSave","onReset","onSubmit","onDraw","setState","flex","onClick","modal","cache","time","allowAuto","autoEnabled","setAutoEnabled","cacheMax","totalTime","disabled","TimerButton","children","flexDirection","fontSize","margin","textAlign","checked","onChange","Header","setModal","unseenUpgradesRed","keys","includes","unseenUpgradesGreen","unseenUpgradesBlue","Modal","onClose","isOpen","onRequestClose","overlayClassName","customStyles","flexWrap","marginTop","Deck","BaseModal","setAppElement","AddCard","props","useState","marginRight","position","concat","Store","seenOrAffordable","afford","newUpgrades","up","canAfford","currentLevel","newBoard","alert","flat","content","top","left","right","bottom","maxWidth","App","_onMouseDown","setCursorState","startRef","clientY","clientX","element","document","elementFromPoint","console","log","classList","contains","parentElement","lastClickRef","dataset","activeCard","clicked","then","save","debounce","setValue","location","reload","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.377493ef.chunk.js","sourcesContent":["import { shuffle } from 'lodash'\nimport { v4 as uuid } from 'uuid'\n\nexport const emptyCard = { value: undefined, id: null, direction: 0 }\nexport const CHEAT_MODE = false\nexport const TICK = 200\nexport const SUITS = '●×✂+↻'.split('')\nexport const COLORS = ['#333', '#d40000', '#33bb55', '#3322aa']\nexport const CARD_HEIGHT = 100\nconst draw_time = 25\nconst submit_time = 25\n\nexport const getNewCard = ({\n  value = 1,\n  color = 0,\n  suit = 0,\n  direction = 0,\n} = {}) => ({\n  value,\n  color,\n  suit,\n  direction,\n  id: uuid(),\n})\n\nexport const getCardWithRarity = ({ color, level }) => {\n  let value, suit, direction\n  if (level === 1) {\n    suit = shuffle([0, 0, 1, 1, 2])[0]\n    value = shuffle(suit === 0 ? [3, 4, 5] : suit === 1 ? [2, 3] : [1])[0]\n  }\n  if (level === 2) {\n    suit = shuffle([0, 1, 2, 3, 4])[0]\n    value = shuffle(\n      suit === 0\n        ? [6, 8, 10, 20]\n        : suit === 1\n        ? [3, 4, 5]\n        : suit === 2\n        ? [1]\n        : suit === 3\n        ? [1, 2, 3]\n        : [1, 2, 3],\n    )[0]\n  }\n  if (level === 3) {\n    suit = shuffle([1, 2, 3, 4])[0]\n    value = shuffle(\n      suit === 0\n        ? [20, 40, 60, 100]\n        : suit === 1\n        ? [10, 20, 30]\n        : suit === 2\n        ? [1]\n        : suit === 3\n        ? [3, 4, 5]\n        : [3, 4, 5],\n    )[0]\n  }\n\n  if (suit >= 1) {\n    if (level === 1) direction = shuffle([1, 2, 4, 8])[0]\n    if (level === 2) direction = shuffle([1, 2, 3, 4, 5, 6, 7, 8])[0]\n    if (level === 3)\n      direction = shuffle([3, 5, 6, 7, 9, 10, 11, 12, 13, 14, 15])[0]\n  }\n\n  return getNewCard({ value, color: suit === 0 ? color : 0, suit, direction })\n}\n\nconst getPrice = (baseCost = 1, priceRatio = 1.07, level) =>\n  Math.floor(baseCost * Math.pow(priceRatio, level))\nconst getPrices = (baseCost, priceRatio, maxLevel = 20) => [\n  1,\n  ...new Array(maxLevel)\n    .fill('')\n    .map((_, level) => getPrice(baseCost, priceRatio, level)),\n]\n\nexport const getNewCards = (props) => [\n  getCardWithRarity(props),\n  getCardWithRarity(props),\n  getCardWithRarity(props),\n]\n\nconst BASEUPGRADES = {\n  increaseMaxDraws: {\n    title: 'Increase Draw max',\n    description: (l) => `You can store up to ${l + 1} card draws.`,\n    cost: { type: 'red', levels: getPrices(1, 4, 9).slice(1) },\n    effect: { type: 'change-limit', params: { name: 'draw_cache', value: 1 } },\n  },\n\n  increaseHandSize: {\n    title: 'Increase Hand Size',\n    description: (l) => `Raise your max hand size to ${l + 2}`,\n    cost: { type: 'green', levels: getPrices(1, 5, 4).slice(1) },\n    effect: { type: 'change-limit', params: { name: 'hand_size', value: 1 } },\n  },\n\n  increaseBoardSize: {\n    title: 'Increase Board Size',\n    description: (l) => `You can submit ${l + 2} cards at once.`,\n    cost: { type: 'blue', levels: getPrices(5, 2.2, 23) },\n    effect: { type: 'change-limit', params: { name: 'board_size', value: 1 } },\n  },\n\n  addRedCard: {\n    title: 'Add Common Red Card',\n    description: (l) => `Buy your ${l + 1}nd common red card`,\n    cost: { type: 'red', levels: getPrices(10, 1.3, 50).slice(1) },\n    effect: {\n      type: 'add-card',\n      params: { cardConfig: { color: 1, level: 1 } },\n    },\n  },\n  addGreenCard: {\n    title: 'Add Common Green Card',\n    description: (l) => `Buy your ${l + 1}nd common green card`,\n    cost: { type: 'green', levels: getPrices(10, 1.3, 50).slice(1) },\n    effect: {\n      type: 'add-card',\n      params: { cardConfig: { color: 2, level: 1 } },\n    },\n  },\n  addBlueCard: {\n    title: 'Add Common Blue Card',\n    description: (l) => `Buy your ${l + 1}nd common blue card`,\n    cost: { type: 'blue', levels: getPrices(10, 1.3, 50).slice(1) },\n    effect: {\n      type: 'add-card',\n      params: { cardConfig: { color: 3, level: 1 } },\n    },\n  },\n\n  decreaseDrawTime: {\n    title: 'Decrease Draw Time',\n    description: (l) =>\n      `Decrease your draw time to ${(\n        (draw_time * TICK) / 1000 -\n        (l + 1) * 0.4\n      ).toFixed(1)} seconds`,\n    cost: { type: 'red', levels: getPrices(3, 1.6, 10).slice(1) },\n    effect: { type: 'change-limit', params: { name: 'draw_time', value: -2 } },\n  },\n\n  decreaseSubmitTime: {\n    title: 'Decrease Submit Time',\n    description: (l) =>\n      `Decrease your submit time to ${(\n        (draw_time * TICK) / 1000 -\n        (l + 1) * 0.4\n      ).toFixed(1)} seconds`,\n    cost: { type: 'blue', levels: getPrices(3, 1.6, 10).slice(1) },\n    effect: {\n      type: 'change-limit',\n      params: { name: 'submit_time', value: -2 },\n    },\n  },\n\n  increaseMaxSubmits: {\n    title: 'Increase Submit max',\n    description: (l) => `You can store up to ${l + 2} card submits.`,\n    cost: { type: 'blue', levels: getPrices(3, 1.6, 9).slice(1) },\n    effect: {\n      type: 'change-limit',\n      params: { name: 'submit_cache', value: 1 },\n    },\n  },\n\n  autoDraw: {\n    title: 'Auto Draw',\n    description: (l) => `Use your draws automatically`,\n    cost: { type: 'red', levels: [100] },\n    effect: {\n      type: 'change-limit',\n      params: { name: 'draw_auto', value: 1 },\n    },\n  },\n\n  autoSubmit: {\n    title: 'Auto Submit',\n    description: (l) => `Use your submits automatically`,\n    cost: { type: 'blue', levels: [100] },\n    effect: {\n      type: 'change-limit',\n      params: { name: 'submit_auto', value: 1 },\n    },\n  },\n  autoPlay: {\n    title: 'Auto Play',\n    description: (l) =>\n      `Play a card from your hand automatically every 5 seconds`,\n    cost: { type: 'green', levels: [100] },\n    effect: {\n      type: 'change-limit',\n      params: { name: 'play_auto', value: 1 },\n    },\n  },\n\n  addRedUncommonCard: {\n    title: 'Add Uncommon Red Card',\n    description: (l) => `Buy your ${l + 1}nd uncommon red card`,\n    cost: { type: 'red', levels: getPrices(100, 1.5, 50).slice(1) },\n    effect: {\n      type: 'add-card',\n      params: { cardConfig: { color: 1, level: 2 } },\n    },\n  },\n\n  addGreenUncommonCard: {\n    title: 'Add Uncommon Green Card',\n    description: (l) => `Buy your ${l + 1}nd uncommon green card`,\n    cost: { type: 'green', levels: getPrices(100, 1.5, 50).slice(1) },\n    effect: {\n      type: 'add-card',\n      params: { cardConfig: { color: 2, level: 2 } },\n    },\n  },\n\n  addBlueUncommonCard: {\n    title: 'Add Uncommon Blue Card',\n    description: (l) => `Buy your ${l + 1}nd uncommon blue card`,\n    cost: { type: 'blue', levels: getPrices(100, 1.5, 50).slice(1) },\n    effect: {\n      type: 'add-card',\n      params: { cardConfig: { color: 3, level: 2 } },\n    },\n  },\n\n  addRedRareCard: {\n    title: 'Add Rare Red Card',\n    description: (l) => `Buy your ${l + 1}nd rare red card`,\n    cost: { type: 'red', levels: getPrices(500, 1.6, 50).slice(1) },\n    effect: {\n      type: 'add-card',\n      params: { cardConfig: { color: 1, level: 2 } },\n    },\n  },\n  addGreenRareCard: {\n    title: 'Add Rare Green Card',\n    description: (l) => `Buy your ${l + 1}nd rare green card`,\n    cost: { type: 'green', levels: getPrices(500, 1.6, 50).slice(1) },\n    effect: {\n      type: 'add-card',\n      params: { cardConfig: { color: 2, level: 2 } },\n    },\n  },\n  addBlueRareCard: {\n    title: 'Add Rare Blue Card',\n    description: (l) => `Buy your ${l + 1}nd rare blue card`,\n    cost: { type: 'blue', levels: getPrices(500, 1.6, 50).slice(1) },\n    effect: {\n      type: 'add-card',\n      params: { cardConfig: { color: 3, level: 3 } },\n    },\n  },\n}\n\nexport const UPGRADES = Object.entries(BASEUPGRADES).reduce((obj, [k, v]) => {\n  return { ...obj, [k]: { ...v, name: k } }\n}, {})\n\nexport const STORES = {\n  red: Object.values(UPGRADES).filter((u) => u.cost.type === 'red'),\n  green: Object.values(UPGRADES).filter((u) => u.cost.type === 'green'),\n  blue: Object.values(UPGRADES).filter((u) => u.cost.type === 'blue'),\n}\n\nconst CARDS = [\n  getNewCard({ value: 1, color: 1, suit: 0 }),\n  getNewCard({ value: 1, color: 2, suit: 0 }),\n  getNewCard({ value: 1, color: 3, suit: 0 }),\n  getNewCard({ value: 2, color: 1, suit: 0 }),\n  getNewCard({ value: 2, color: 2, suit: 0 }),\n  getNewCard({ value: 2, color: 3, suit: 0 }),\n  getNewCard({ value: 3, color: 1, suit: 0 }),\n  getNewCard({ value: 3, color: 2, suit: 0 }),\n  getNewCard({ value: 3, color: 3, suit: 0 }),\n]\nexport const getInitialState = () => {\n  const shuffled = CARDS\n  const board_size = 1\n\n  return {\n    store: {\n      open: 0,\n    },\n    purchases: {},\n    limits: {\n      prestige: 1,\n      hand_size: 1,\n      draw_count: 1,\n      draw_auto: 0,\n      submit_auto: 0,\n      play_auto_time: 5,\n      play_auto: 0,\n      draw_cache: 1,\n      submit_cache: 1,\n      board_size,\n      draw_time,\n      submit_time,\n    },\n    auto_play: {\n      draw: false,\n      submit: false,\n      play: false,\n    },\n    counters: {\n      play_time: 0,\n      draw_time: 0,\n      submit_time: 0,\n      draw_cache: 0,\n      submit_cache: 0,\n    },\n    points: {\n      red: 0,\n      green: 0,\n      blue: 0,\n    },\n    max_points: {\n      red: 0,\n      green: 0,\n      blue: 0,\n    },\n    seen_upgrades: {},\n    cards: {\n      board: getBoard(board_size),\n      draw: shuffled,\n      discard: [],\n      hand: [],\n    },\n  }\n}\n\nexport const getBoard = (size) =>\n  new Array(size)\n    .fill('')\n    .slice(0, size)\n    .map(() => ({ id: uuid() }))\n","export const swapCards = (state, a = {}, b = {}) => {\n  const { list: l1, index: i1, ...s1 } = a\n  const { list: l2, index: i2, ...s2 } = b\n\n  let result = {\n    ...state,\n    cards: {\n      ...state.cards,\n      [l1]: (state.cards[l1] || []).map((c, i) => (i === +i1 ? s2 : c)),\n      [l2]: (state.cards[l2] || []).map((c, i) =>\n        i === +i2 ? s1 : l1 === l2 && i === +i1 ? s2 : c,\n      ),\n    },\n  }\n\n  result.cards.hand = result.cards.hand.filter((c) => !!c.value)\n\n  return result\n}\n","import { useRef, useState } from 'react'\nimport * as utils from './index'\nimport { useWindowEvent } from '.'\n\nexport const useMouse = (_onMouseDown) => {\n  const [cursorState, setCursorState] = useState({ mouseY: 0, mouseX: 0 })\n  const startRef = useRef({ x: 0, y: 0 })\n\n  useWindowEvent('pointermove', ({ clientY, clientX }) => {\n    setCursorState({ mouseX: clientX, mouseY: clientY })\n  })\n\n  useWindowEvent('pointerdown', ({ clientX, clientY }) => {\n    let element = document.elementFromPoint(clientX, clientY)\n    console.log(element)\n    if (element?.classList.contains('click')) element = element.parentElement\n    startRef.current.x = clientX\n    startRef.current.y = clientY\n    _onMouseDown({\n      clientX,\n      clientY,\n      element,\n    })\n    setCursorState({ mouseX: clientX, mouseY: clientY })\n  })\n\n  useWindowEvent('pointerup', ({ clientX, clientY }) => {\n    let element = document.elementFromPoint(clientX, clientY)\n    if (element?.classList.contains('click')) element = element.parentElement\n    if (\n      startRef.current.x - clientX > 10 ||\n      startRef.current.y - clientY > 10\n    ) {\n      _onMouseDown({ clientX, clientY, element })\n    }\n  })\n\n  return { cursorState }\n}\n\nexport const useOnClick = (state, setState) => {\n  const lastClickRef = useRef(0)\n\n  return ({ element }) => {\n    if (!element) return\n    const { list, index } = element.dataset\n    if (!list) {\n      if (isDoubleClick(lastClickRef.current))\n        setState(utils.autoplayCard(state, state.activeCard))\n\n      return setState((state) => ({ ...state, activeCard: null }))\n    }\n\n    const clicked = { ...state.cards[list][+index], list, index: +index }\n\n    if (state.activeCard) {\n      setState((state) => ({\n        ...utils.swapCards(state, clicked, state.activeCard),\n        activeCard: null,\n      }))\n    } else if (clicked.value > -1) {\n      lastClickRef.current = new Date()\n      setState((state) => ({ ...state, activeCard: clicked }))\n    }\n  }\n}\nconst isDoubleClick = (date) => +new Date() - +date < 250\n","import { groupBy } from 'lodash'\nimport { getBoardWidth } from '../components/App'\nimport * as constants from '../constants'\nimport { getDirections } from './index'\n\nexport const scoreCards = (state) => {\n  const scoredCards = state.cards.board\n    .map((c, index) => ({ ...c, index, _value: c.value, _color: c.color }))\n    .filter((c) => c.value > 0)\n\n  const cardGroups = groupBy(scoredCards, (c) => c.suit)\n  let {\n    0: pointCards = [],\n    1: multiCards = [],\n    2: removeCards = [],\n    3: upgradeCards = [],\n    4: persistCards = [],\n  } = cardGroups\n\n  const applyEffect = (card, effect) => {\n    const effectedCards = getCardsInDirection(state, card)\n    effectedCards.forEach((c) => {\n      const target = scoredCards.find((pc) => c.id === pc.id)\n      if (target) effect(target)\n    })\n  }\n\n  persistCards.forEach((card) =>\n    applyEffect(card, (target) => {\n      target._hp = card._value\n    }),\n  )\n\n  upgradeCards.forEach((card) =>\n    applyEffect(card, (target) => {\n      target.value += card._value\n    }),\n  )\n\n  multiCards.forEach((card) =>\n    applyEffect(card, (target) => {\n      target._value *= card._value\n    }),\n  )\n\n  state = {\n    ...state,\n    cards: {\n      ...state.cards,\n      board: state.cards.board.map(\n        (c) => scoredCards.find((pc) => pc.id === c.id) || c,\n      ),\n    },\n    points: addCardScores(state, pointCards),\n  }\n\n  state = {\n    ...state,\n    max_points: {\n      red: Math.max(state.max_points.red, state.points.red),\n      green: Math.max(state.max_points.green, state.points.green),\n      blue: Math.max(state.max_points.blue, state.points.blue),\n    },\n  }\n\n  removeCards.forEach((card) =>\n    applyEffect(card, (target) => {\n      state.cards = Object.entries({ ...state.cards }).reduce(\n        (obj, [k, v]) => ({\n          ...obj,\n          [k]: v.map((c) =>\n            c.id !== target.id ? c : { ...constants.emptyCard, id: c.id },\n          ),\n        }),\n        {},\n      )\n    }),\n  )\n\n  state = {\n    ...discardBoard(state),\n    counters: {\n      ...state.counters,\n      submit_cache: state.counters.submit_cache - 1,\n    },\n  }\n\n  return state\n}\n\nconst discardBoard = (state) => {\n  return {\n    ...state,\n    cards: {\n      ...state.cards,\n      board: state.cards.board.map((c) =>\n        c.value > 0 && !c._hp\n          ? { ...c, ...constants.emptyCard }\n          : { ...c, _hp: (c._hp || 1) - 1 },\n      ),\n      discard: [\n        ...state.cards.discard,\n        ...state.cards.board\n          .filter((c) => c.value > 0 && !c._hp)\n          .map((c) => ({\n            ...c,\n            _value: undefined,\n            _color: undefined,\n            index: undefined,\n          })),\n      ],\n    },\n  }\n}\n\nconst addCardScores = (state, cards) =>\n  cards.reduce(\n    (sum, current) => {\n      if (current._color === 1) {\n        sum.red += Math.round(current._value * state.limits.prestige)\n      }\n      if (current._color === 2) {\n        sum.green += Math.round(current._value * state.limits.prestige)\n      }\n      if (current._color === 3) {\n        sum.blue += Math.round(current._value * state.limits.prestige)\n      }\n\n      return sum\n    },\n    { ...state.points },\n  )\n\nconst getCardsInDirection = (state, card) => {\n  const cards = state.cards.board\n  const s = getBoardWidth(state.limits.board_size)\n  const p = card.index\n  // TODO: implement diagonals  tr, br, bl, tl\n  const [t, r, b, l] = getDirections(card.direction)\n  let result = []\n\n  if (t) result.push(cards[p - s])\n  if (r && p % s !== s - 1) result.push(cards[p + 1])\n  if (b) result.push(cards[p + s])\n  if (l && p % s !== 0) result.push(cards[p - 1])\n\n  return result.filter((c) => c?.value > 0)\n}\n","export const moveCard = (\n  state,\n  source,\n  destination,\n  sourceIndex = 0,\n  destIndex = destination.length,\n) => {\n  const card = [...(state.cards[source] || [])].find(\n    (c, i) => i === sourceIndex,\n  )\n  const newSource = [...(state.cards[source] || [])].filter(\n    (c, i) => i !== sourceIndex,\n  )\n\n  const dest = state.cards[destination] || []\n\n  return {\n    ...state,\n    cards: {\n      ...state.cards,\n      [source]: newSource,\n      [destination]: [\n        ...dest.slice(0, destIndex),\n        card,\n        ...dest.slice(destIndex),\n      ],\n    },\n  }\n}\n","import { CHEAT_MODE, getBoard } from '../constants'\n\n// utils.doPurchase(state, {\n//                 cost: {},\n//                 effect: { type: 'remove-card', params: { id } },\n//               }),\n\nexport const doPurchase = (state, purchase) => {\n  const cost = getCost(state, purchase)\n  let points = { ...state.points }\n  let cards = { ...state.cards }\n  let limits = { ...state.limits }\n\n  if (!CHEAT_MODE) points[cost.type] -= cost.value\n\n  if (purchase.effect.type === 'add-points') {\n    points = Object.entries(points).reduce(\n      (sum, [k, v]) => ({ ...sum, [k]: v + purchase.effect.params.value }),\n      {},\n    )\n  }\n\n  if (purchase.effect.type === 'add-card') {\n    state.modal = {\n      name: 'addCard',\n      cardConfig: purchase.effect.params.cardConfig,\n    }\n  }\n\n  if (purchase.effect.type === 'change-limit') {\n    if (purchase.effect?.params?.name) {\n      const size = purchase.effect?.params?.value || 0\n      limits[purchase.effect.params.name] += size\n      if (purchase.effect.params.name === 'board_size') {\n        const newBoard = getBoard(limits[purchase.effect.params.name])\n        cards.board = newBoard.map((c, i) => cards.board[i] || c)\n      }\n    }\n  }\n\n  if (purchase.effect.type === 'remove-card') {\n    cards = Object.entries({ ...cards }).reduce(\n      (obj, [k, v]) => ({\n        ...obj,\n        [k]: v.filter((c) => c.id !== purchase.effect.params.id),\n      }),\n      {},\n    )\n  }\n\n  if (purchase.effect.type === 'upgrade-card') {\n    cards = Object.entries({ ...cards }).reduce(\n      (obj, [k, v]) => ({\n        ...obj,\n        [k]: v.map((c) =>\n          c.id === purchase.effect.params.id ? { ...c, value: c.value + 1 } : c,\n        ),\n      }),\n      {},\n    )\n  }\n\n  return {\n    ...state,\n    purchases: {\n      ...state.purchases,\n      [purchase.name]: (state.purchases[purchase.name] || 0) + 1,\n    },\n    limits,\n    cards,\n    points,\n  }\n}\n\nexport const getCurrentLevel = (state, purchase) => {\n  return state.purchases[purchase.name] || 0\n}\nexport const getCost = (state, purchase) => {\n  return {\n    type: purchase.cost.type,\n    value: purchase.cost.levels[getCurrentLevel(state, purchase)],\n  }\n}\n\nexport const getCanAfford = (state, purchase) => {\n  if (CHEAT_MODE) return true\n  const cost = getCost(state, purchase)\n  return state.points[cost.type] >= cost.value\n}\n","import { moveCard } from './moveCard'\nimport { shuffleDiscard } from './doCounters'\n\nexport const draw = (state) => {\n  if (state.cards.draw.length > 0) {\n    if (state.cards.hand.length < state.limits.hand_size)\n      state = { ...moveCard(state, 'draw', 'hand') }\n  } else {\n    state = { ...shuffleDiscard(state) }\n    if (\n      state.cards.draw.length > 0 &&\n      state.cards.hand.length < state.limits.hand_size\n    )\n      state = { ...moveCard(state, 'draw', 'hand') }\n  }\n  state = {\n    ...state,\n    counters: { ...state.counters, draw_cache: state.counters.draw_cache - 1 },\n  }\n\n  return state\n}\n","import * as utils from '../utils'\nimport { draw } from './draw'\n\nexport const doCounters = (state) => {\n  if (state.counters.draw_time === 0) {\n    state = {\n      ...state,\n      counters: {\n        ...state.counters,\n        draw_cache: state.counters.draw_cache + 1,\n        draw_time: state.limits.draw_time,\n      },\n    }\n  } else if (state.counters.draw_cache < state.limits.draw_cache) {\n    state = {\n      ...state,\n      counters: { ...state.counters, draw_time: state.counters.draw_time - 1 },\n    }\n  }\n\n  if (state.counters.submit_time === 0) {\n    state = {\n      ...state,\n      counters: {\n        ...state.counters,\n        submit_cache: state.counters.submit_cache + 1,\n        submit_time: state.limits.submit_time,\n      },\n    }\n  } else {\n    if (state.counters.submit_cache < state.limits.submit_cache)\n      state = {\n        ...state,\n        counters: {\n          ...state.counters,\n          submit_time: state.counters.submit_time - 1,\n        },\n      }\n  }\n\n  if (state.counters.play_time === 0) {\n    if (\n      state.auto_play.play &&\n      state.cards.hand.length > 0 &&\n      state.cards.board.filter((c) => !c.value).length > 0\n    ) {\n      state = {\n        ...utils.autoplayCard(state, {\n          ...state.cards.hand[0],\n          list: 'hand',\n          index: 0,\n        }),\n        counters: { ...state.counters, play_time: state.limits.play_auto_time },\n      }\n    }\n  } else {\n    state = {\n      ...state,\n      counters: {\n        ...state.counters,\n        play_time: state.counters.play_time - 1,\n      },\n    }\n  }\n\n  if (\n    state.counters.draw_cache > 0 &&\n    state.auto_play.draw &&\n    state.cards.hand.length < state.limits.hand_size\n  ) {\n    state = draw(state)\n  }\n\n  if (\n    state.counters.submit_cache > 0 &&\n    state.auto_play.submit &&\n    state.cards.board.filter((c) => !!c.value).length > 0\n  ) {\n    state = utils.scoreCards(state)\n  }\n\n  return state\n}\nexport const shuffleDiscard = (state) => {\n  return {\n    ...state,\n    cards: { ...state.cards, draw: state.cards.discard, discard: [] },\n  }\n}\n","import omit from 'lodash/omit'\nimport { useEffect, useState, useRef } from 'react'\nimport { swapCards } from './swapCards'\n\nexport { useOnClick, useMouse } from './useMouse'\nexport { scoreCards } from './scoreCards'\nexport { moveCard } from './moveCard'\nexport { swapCards } from './swapCards'\nexport { getCanAfford, doPurchase } from './doPurchase'\nexport { doCounters } from './doCounters'\nexport { draw } from './draw'\n\nexport const useForceUpdate = () => {\n  const [, setValue] = useState(0)\n  return () => setValue((value) => ++value)\n}\n\nexport const useWindowEvent = (event, callback) => {\n  useEffect(() => {\n    window.addEventListener(event, callback)\n    return () => window.removeEventListener(event, callback)\n  }, [event, callback])\n}\n\nexport function useInterval(callback, delay) {\n  const savedCallback = useRef()\n\n  useEffect(() => {\n    savedCallback.current = callback\n  })\n\n  useEffect(() => {\n    function tick() {\n      savedCallback.current()\n    }\n    let id = setInterval(tick, delay)\n    return () => clearInterval(id)\n  }, [delay])\n}\n\nexport const getDirections = (n = 0) => {\n  let value = n\n  return new Array(8).fill('').map((_, i) => (value >> i) & 0x1)\n}\n\nexport const autoplayCard = (state, card) => {\n  if (state.cards.board.every((c) => !!c.value)) return state\n  const index = state.cards.board.findIndex((c) => !c.value)\n  if (!card) return state\n  return swapCards(state, { list: 'board', index }, card)\n}\n\nexport const writeToStorage = async (queryKey, data) => {\n  let storageData = await localStorage.getItem('__incremental_data')\n\n  storageData = {\n    ...JSON.parse(storageData || '{}'),\n    [queryKey]: data,\n  }\n  await localStorage.setItem('__incremental_data', JSON.stringify(storageData))\n}\n\nexport const readFromStorage = async () => {\n  const storageData = await localStorage.getItem('__incremental_data')\n  let result = {}\n\n  if (storageData !== null) {\n    const queriesWithData = JSON.parse(storageData)\n\n    for (const queryKey in queriesWithData) {\n      const data = queriesWithData[queryKey]\n      result[queryKey] = data\n    }\n  }\n  return result\n}\n\nexport const removeFromStorage = async (key) => {\n  let storageData = await localStorage.getItem('__incremental_data')\n  await localStorage.setItem(\n    '__incremental_data',\n    JSON.stringify(omit(JSON.parse(storageData || '{}'), [key])),\n  )\n}\n","import React from 'react'\nimport { getDirections } from '../utils'\n\nexport const Arrows = ({ direction = 0 }) => {\n  const [t, r, b, l, tr, br, bl, tl] = getDirections(direction)\n  return (\n    <svg\n      width=\"26\"\n      height=\"26\"\n      viewBox=\"0 0 26 26\"\n      fill=\"none\"\n      xmlns=\"http://www.w3.org/2000/svg\"\n      style={{ width: 30 }}\n    >\n      <g clipPath=\"url(#clip0)\">\n        {l && (\n          <path\n            d=\"M4.33333 15.7314L4.33333 13.6373L8.49333 13.6464L8.49333 12.3536L4.33333 12.3627L4.33333 10.2686L6.92497e-07 13L4.33333 15.7314Z\"\n            fill=\"black\"\n          />\n        )}\n        {r && (\n          <path\n            d=\"M21.6667 12.3627V10.2686L26 13L21.6667 15.7314L21.6667 13.6373L17.5067 13.6464V12.3536L21.6667 12.3627Z\"\n            fill=\"black\"\n          />\n        )}\n        {b && (\n          <path\n            d=\"M13.6373 21.6667L15.7314 21.6667L13 26L10.2686 21.6667L12.3627 21.6667L12.3536 17.5067H13.6464L13.6373 21.6667Z\"\n            fill=\"black\"\n          />\n        )}\n        {t && (\n          <path\n            d=\"M12.3627 4.33333L10.2686 4.33333L13 9.53674e-07L15.7314 4.33333L13.6373 4.33333L13.6464 8.49333H12.3536L12.3627 4.33333Z\"\n            fill=\"black\"\n          />\n        )}\n        {tl && (\n          <path\n            d=\"M7.24583 8.217L5.65034 9.81249L5 5L9.81249 5.65034L8.217 7.24583L10.8461 9.86104L9.86104 10.8461L7.24583 8.217Z\"\n            fill=\"black\"\n          />\n        )}\n        {bl && (\n          <path\n            d=\"M8.21699 18.7542L9.81249 20.3497L5 21L5.65033 16.1875L7.24582 17.783L9.86104 15.1539L10.8461 16.139L8.21699 18.7542Z\"\n            fill=\"black\"\n          />\n        )}\n        {br && (\n          <path\n            d=\"M18.7542 17.783L20.3497 16.1875L21 21L16.1875 20.3497L17.783 18.7542L15.1539 16.139L16.139 15.1539L18.7542 17.783Z\"\n            fill=\"black\"\n          />\n        )}\n        {tr && (\n          <path\n            d=\"M16.1875 5.65034L17.783 7.24583L15.1539 9.86105L16.139 10.8461L18.7542 8.217L20.3497 9.81249L21 5L16.1875 5.65034Z\"\n            fill=\"black\"\n          />\n        )}\n      </g>\n      <defs>\n        <clipPath id=\"clip0\">\n          <rect width=\"26\" height=\"26\" fill=\"white\" />\n        </clipPath>\n      </defs>\n    </svg>\n  )\n}\n","import React from 'react'\nimport * as constants from '../constants'\nimport { Motion, spring } from 'react-motion'\nimport { Arrows } from './Arrows'\n\nexport const Card = React.memo(\n  ({\n    card,\n    handSize = 0,\n    boardSize = 1,\n    isActive,\n    cursorState,\n    style = {},\n  }) => {\n    const w = window.innerWidth / 2\n    const h = window.innerHeight / 2\n    let _x = 0,\n      _y = 0\n\n    if (card.list === 'hand') {\n      _x = w - (handSize / 2) * constants.CARD_HEIGHT\n      _y = h / 0.7\n      _x += card.index * constants.CARD_HEIGHT\n    }\n\n    if (card.list === 'board') {\n      _x = w - (boardSize / 2) * constants.CARD_HEIGHT\n      _y = h / 5 + ((5 - boardSize) / 2) * constants.CARD_HEIGHT\n      _x += (card.index % boardSize) * constants.CARD_HEIGHT\n      _y += Math.floor(card.index / boardSize) * constants.CARD_HEIGHT\n    }\n\n    if (card.list === 'draw') {\n      _x = w - 4 * constants.CARD_HEIGHT\n      _y = h / 0.7\n    }\n    if (card.list === 'discard') {\n      _x = w + 3 * constants.CARD_HEIGHT\n      _y = h / 0.7\n    }\n\n    _x = isActive ? cursorState.mouseX : _x\n    _y = isActive ? cursorState.mouseY : _y\n\n    const config = { stiffness: 200, damping: 20 }\n    const x = card.value > -1 ? spring(_x, config) : _x\n    const y = card.value > -1 ? spring(_y, config) : _y\n    const r = spring(0, config)\n    const s = spring(isActive ? 1.185 : 1, config)\n    const o = spring(card.value > -1 ? 1 : 0, config)\n    const suit = constants.SUITS[card.suit]\n    const color = constants.COLORS[card._color || card.color]\n    const isHidden = card.list === 'draw'\n    const isEmpty = typeof card.value !== 'number'\n    const isBottom =\n      (card.list === 'draw' || card.list === 'discard' || !card.list) &&\n      !card.index\n\n    const classes = [\n      `card can-move rank${card.value}`,\n      (isEmpty || isBottom) && 'shadow',\n      isHidden && 'hidden',\n      (isActive || card.list === 'draw' || card.list === 'discard') &&\n        'disable-touch',\n      isEmpty && 'empty',\n      suit,\n    ]\n\n    return (\n      <Motion style={{ x, y, r, s, o }}>\n        {({ x, y, r, s, o }) => (\n          <div\n            data-index={card.index}\n            data-list={card.list}\n            data-value={card.value}\n            className={classes.join(' ')}\n            style={{\n              transform: `translate3d(${x}px, ${y}px, 0) rotate(${r}deg) scale(${s})`,\n              backgroundColor: `rgba(255,255,255,${o})`,\n              zIndex: isActive ? 20 : isEmpty ? 0 : 10,\n              color,\n              display: 'flex',\n              justifyContent: 'center',\n              alignItems: 'center',\n              ...style,\n            }}\n          >\n            <div className=\"value\">{card.value}</div>\n            {typeof card.value === 'number' && suit && (\n              <div className=\"face\">{suit}</div>\n            )}\n            {card._hp && card._hp > 0 ? (\n              <div className=\"hp\">{card._hp}</div>\n            ) : null}\n            {card.direction > 0 && <Arrows direction={card.direction} />}\n            <div className=\"back\" />\n            <div className=\"click\" />\n          </div>\n        )}\n      </Motion>\n    )\n  },\n)\n","import React from 'react'\nimport * as constants from '../constants'\n\nexport function Footer({ onSave, onReset, onSubmit, onDraw, setState, state }) {\n  return (\n    <footer>\n      <div\n        style={{\n          flex: 1,\n          alignItems: 'flex-end',\n          display: 'flex',\n          justifyContent: 'flex-start',\n        }}\n      >\n        {/* TODO: this should be under the discard deck */}\n        <button\n          onClick={() => setState((s) => ({ ...s, modal: { name: 'deck' } }))}\n        >\n          Deck\n        </button>\n      </div>\n\n      <div\n        style={{\n          flex: 1,\n          display: 'flex',\n          alignItems: 'flex-end',\n          justifyContent: 'center',\n        }}\n      >\n        {/* TODO: this should be under the draw deck */}\n\n        <TimerButton\n          cache={state.counters.draw_cache}\n          time={state.counters.draw_time}\n          allowAuto={state.limits.draw_auto}\n          autoEnabled={state.auto_play.draw}\n          setAutoEnabled={(draw) =>\n            setState({ ...state, auto_play: { ...state.auto_play, draw } })\n          }\n          cacheMax={state.limits.draw_cache}\n          totalTime={state.limits.draw_time}\n          onClick={onDraw}\n          disabled={state.cards.hand.length === state.limits.hand_size}\n        >\n          Draw\n        </TimerButton>\n\n        <TimerButton\n          cache={state.counters.submit_cache}\n          allowAuto={state.limits.submit_auto}\n          autoEnabled={state.auto_play.submit}\n          setAutoEnabled={(submit) =>\n            setState({ ...state, auto_play: { ...state.auto_play, submit } })\n          }\n          cacheMax={state.limits.submit_cache}\n          time={state.counters.submit_time}\n          totalTime={state.limits.submit_time}\n          onClick={onSubmit}\n          disabled={state.cards.board.filter((c) => !!c.value).length === 0}\n        >\n          Submit\n        </TimerButton>\n        {/* TODO: this should just be a checkbox under the players hand */}\n        {state.limits.play_auto > 0 && (\n          <TimerButton\n            allowAuto\n            autoEnabled={state.auto_play.play}\n            setAutoEnabled={(play) =>\n              setState({ ...state, auto_play: { ...state.auto_play, play } })\n            }\n            time={state.counters.play_time}\n            totalTime={state.limits.play_auto_time}\n            disabled\n          >\n            Autoplay\n          </TimerButton>\n        )}\n      </div>\n      <div\n        style={{\n          flex: 1,\n          display: 'flex',\n          alignItems: 'flex-end',\n          justifyContent: 'flex-end',\n        }}\n      >\n        <button onClick={onSave}>save</button>\n        <button onClick={onReset}>reset</button>\n      </div>\n    </footer>\n  )\n}\n\nconst tps = 1000 / constants.TICK\n\n// TODO: should make this a progress bar style button\nconst TimerButton = ({\n  cache,\n  cacheMax,\n  time,\n  autoEnabled,\n  setAutoEnabled,\n  allowAuto,\n  totalTime,\n  children,\n  onClick,\n  disabled,\n}) => (\n  <div\n    style={{\n      width: '3rem',\n      height: '2rem',\n      display: 'flex',\n      flexDirection: 'column',\n      justifyContent: 'space-between',\n      alignItems: 'center',\n    }}\n  >\n    <p style={{ fontSize: '.5rem', margin: 0, textAlign: 'center' }}>\n      {(time / tps).toFixed(1)}/{(totalTime / tps).toFixed(1)}\n    </p>\n    {cacheMax > 0 && (\n      <p style={{ fontSize: '.5rem', margin: 0, textAlign: 'center' }}>\n        {cache}/{cacheMax}\n      </p>\n    )}\n    <div style={{ display: 'flex', flexDirection: 'row' }}>\n      <button disabled={cache === 0 || disabled} onClick={onClick}>\n        {children}\n      </button>\n      {!!allowAuto && (\n        <input\n          type=\"checkbox\"\n          checked={!!autoEnabled}\n          onChange={() => setAutoEnabled(!autoEnabled)}\n        />\n      )}\n    </div>\n  </div>\n)\n","import React from 'react'\nimport { CHEAT_MODE, COLORS, STORES } from '../constants'\nimport { getCanAfford } from '../utils'\n\nexport function Header({ state, setModal }) {\n  const unseenUpgradesRed = STORES.red.filter(\n    (u) =>\n      !Object.keys(state.seen_upgrades).includes(u.name) &&\n      getCanAfford(state, u),\n  )\n  const unseenUpgradesGreen = STORES.green.filter(\n    (u) =>\n      !Object.keys(state.seen_upgrades).includes(u.name) &&\n      getCanAfford(state, u),\n  )\n  const unseenUpgradesBlue = STORES.blue.filter(\n    (u) =>\n      !Object.keys(state.seen_upgrades).includes(u.name) &&\n      getCanAfford(state, u),\n  )\n\n  return (\n    <header>\n      <div style={{ flex: 1, display: 'flex' }}>\n        <span style={{ fontSize: '.5rem' }}>Cards Against Luminosity</span>\n      </div>\n\n      <div\n        style={{\n          flex: 1,\n          display: 'flex',\n          justifyContent: 'center',\n        }}\n      >\n        <p style={{ color: COLORS[1], margin: '0px 10px' }}>\n          {state.points.red}\n        </p>\n        <p style={{ color: COLORS[2], margin: '0px 10px' }}>\n          {state.points.green}\n        </p>\n        <p style={{ color: COLORS[3], margin: '0px 10px' }}>\n          {state.points.blue}\n        </p>\n      </div>\n\n      <div\n        style={{\n          flex: 1,\n          display: 'flex',\n          flexDirection: 'column',\n          alignItems: 'flex-end',\n          justifyContent: 'center',\n        }}\n      >\n        {(CHEAT_MODE || state.max_points.red > 0) && (\n          <button onClick={() => setModal({ name: 'store', type: 'red' })}>\n            Red Store{' '}\n            {unseenUpgradesRed.length > 0\n              ? `(${unseenUpgradesRed.length})`\n              : ''}\n          </button>\n        )}\n        {(CHEAT_MODE || state.max_points.green > 0) && (\n          <button onClick={() => setModal({ name: 'store', type: 'green' })}>\n            Green Store{' '}\n            {unseenUpgradesGreen.length > 0\n              ? `(${unseenUpgradesGreen.length})`\n              : ''}\n          </button>\n        )}\n        {(CHEAT_MODE || state.max_points.blue > 0) && (\n          <button onClick={() => setModal({ name: 'store', type: 'blue' })}>\n            Blue Store{' '}\n            {unseenUpgradesBlue.length > 0\n              ? `(${unseenUpgradesBlue.length})`\n              : ''}\n          </button>\n        )}\n      </div>\n    </header>\n  )\n}\n","import React, { useEffect, useState } from 'react'\nimport BaseModal from 'react-modal'\nimport * as utils from '../utils'\nimport * as constants from '../constants'\nimport { Card } from './Card'\nimport { getCost, getCurrentLevel } from '../utils/doPurchase'\nimport { startCase } from 'lodash'\nBaseModal.setAppElement('#root')\n\nexport function Modal({ state, setState, onClose }) {\n  const { name, type } = state.modal || {}\n  const label = type\n  const purchases = constants.STORES[label] || []\n  return (\n    <BaseModal\n      isOpen={!!name}\n      onRequestClose={onClose}\n      overlayClassName=\"Overlay\"\n      style={customStyles}\n    >\n      <div\n        style={{\n          display: 'flex',\n          flexWrap: 'wrap',\n          justifyContent: 'center',\n          marginTop: '1rem',\n        }}\n      >\n        {name === 'store' ? (\n          <Store state={state} setState={setState} purchases={purchases} />\n        ) : name === 'addCard' ? (\n          <AddCard state={state} setState={setState} />\n        ) : (\n          <Deck state={state} />\n        )}\n      </div>\n      <button onClick={onClose}>close</button>\n    </BaseModal>\n  )\n}\n\n// TODO colors should be based on what kind of card we bought\n// value and suit should be based on dice roll\nconst AddCard = ({ state, setState }) => {\n  const [cards] = useState(constants.getNewCards(state.modal.cardConfig))\n  return (\n    <div>\n      <p>Add card</p>\n      <div style={{ display: 'flex' }}>\n        {cards.map((c, i) => (\n          <div key={c.id}>\n            <div\n              style={{\n                marginRight: '.25rem',\n                position: 'relative',\n                width: '2rem',\n                height: '2rem',\n              }}\n            >\n              <Card card={c} />\n            </div>\n            <button\n              onClick={() => {\n                setState((state) => ({\n                  ...state,\n                  modal: null,\n                  cards: {\n                    ...state.cards,\n                    discard: state.cards.discard.concat([c]),\n                  },\n                }))\n              }}\n            >\n              pick\n            </button>\n          </div>\n        ))}\n      </div>\n    </div>\n  )\n}\n\nconst Store = ({ state, setState, purchases, afford }) => {\n  const seenOrAffordable = purchases.filter(\n    (p) =>\n      utils.getCanAfford(state, p) ||\n      Object.keys(state.seen_upgrades).includes(p.name),\n  )\n\n  useEffect(() => {\n    const newUpgrades = seenOrAffordable.reduce((obj, up) => {\n      return {\n        ...obj,\n        [up.name]: true,\n      }\n    }, {})\n\n    setState((state) => {\n      return {\n        ...state,\n        seen_upgrades: { ...state.seen_upgrades, ...newUpgrades },\n      }\n    })\n    // eslint-disable-next-line\n  }, [])\n\n  return seenOrAffordable.map((purchase) => {\n    const cost = getCost(state, purchase)\n    const canAfford = utils.getCanAfford(state, purchase)\n    const currentLevel = getCurrentLevel(state, purchase)\n\n    return (\n      <div\n        key={purchase.title}\n        style={{\n          display: 'flex',\n          flexDirection: 'column',\n          justifyContent: 'center',\n          textAlign: 'center',\n          width: '4rem',\n          height: '2rem',\n          margin: 10,\n        }}\n      >\n        <p style={{ fontSize: '.4rem', margin: 0 }}>{purchase.title}</p>\n        {purchase.description && (\n          <p style={{ fontSize: '.25rem', margin: '5px 0' }}>\n            {typeof cost.value === 'number'\n              ? purchase.description(currentLevel)\n              : purchase.description(currentLevel - 1)}\n          </p>\n        )}\n\n        <button\n          key={purchase.title}\n          disabled={typeof cost.value !== 'number' || !canAfford}\n          onClick={() => {\n            if (canAfford) {\n              setState((state) => utils.doPurchase(state, purchase))\n            } else {\n              alert(\"You can't afford it\")\n            }\n          }}\n        >\n          {typeof cost.value === 'number'\n            ? `Buy (${cost.value} ${cost.type})`\n            : 'Max'}\n        </button>\n      </div>\n    )\n  })\n}\n\nfunction Deck({ state }) {\n  const cards = Object.values(state.cards)\n    .flat()\n    .filter((c) => !!c?.value)\n\n  return (\n    <div style={{ display: 'flex', flexWrap: 'wrap' }}>\n      {cards.map((card) => (\n        <div key={card.id}>\n          <Card\n            card={card}\n            style={{ position: 'relative', marginTop: 8, marginRight: 8 }}\n          />\n        </div>\n      ))}\n    </div>\n  )\n}\n\nconst customStyles = {\n  content: {\n    top: '50%',\n    left: '50%',\n    right: 'auto',\n    bottom: 'auto',\n    marginRight: '-50%',\n    transform: 'translate(-50%, -50%)',\n    maxWidth: '10rem',\n    width: '100%',\n    zIndex: 99999,\n  },\n}\n","import React, { useEffect, useState } from 'react'\nimport { debounce } from 'lodash'\n\nimport { Card } from './Card'\nimport { Footer } from './Footer'\nimport { Header } from './Header'\nimport { Modal } from './Modal'\nimport * as constants from '../constants'\nimport * as utils from '../utils'\n\nconst App = () => {\n  const [state, setState] = useState(null)\n\n  const onMouseDown = utils.useOnClick(state, setState)\n  const { cursorState } = utils.useMouse(onMouseDown)\n\n  useEffect(() => {\n    utils.readFromStorage('save').then(({ save } = {}) => {\n      if (!!save) {\n        setState(save)\n      } else {\n        setState(constants.getInitialState())\n      }\n    })\n  }, [])\n\n  const setModal = (modal) => setState((state) => ({ ...state, modal }))\n\n  utils.useWindowEvent('resize', debounce(utils.useForceUpdate(), 500))\n  utils.useInterval(() => setState(utils.doCounters), constants.TICK)\n  utils.useInterval(\n    () =>\n      setState((state) => {\n        utils.writeToStorage('save', state)\n        return state\n      }),\n    5000,\n  )\n\n  if (!state) return null\n\n  const cards = Object.entries(state.cards)\n    .map(([list, cards]) => cards.map((c, index) => ({ ...c, index, list })))\n    .flat()\n  const handSize = cards.filter((c) => c.list === 'hand').length\n\n  return (\n    <>\n      <Header state={state} setModal={setModal} />\n\n      <Modal state={state} setState={setState} onClose={() => setModal()} />\n\n      <div className=\"cards-container\">\n        {cards.map((card) => {\n          const isActive = state.activeCard?.id === card.id && card.value > -1\n\n          return (\n            <Card\n              key={card.id || 'empty' + card.index}\n              card={card}\n              handSize={handSize}\n              boardSize={getBoardWidth(state.limits.board_size)}\n              isActive={isActive}\n              cursorState={cursorState}\n            />\n          )\n        })}\n      </div>\n\n      <Footer\n        onSave={() => utils.writeToStorage('save', state)}\n        onReset={() => {\n          utils.removeFromStorage('save')\n          window.location.reload()\n        }}\n        onSubmit={() => setState(utils.scoreCards)}\n        onDraw={() => setState(utils.draw)}\n        setState={setState}\n        state={state}\n      />\n    </>\n  )\n}\n\nexport default App\n\nexport const getBoardWidth = (size) => {\n  if (size >= 17) return 5\n  if (size >= 10) return 4\n  if (size > 4) return 3\n  if (size >= 2) return 2\n  return 1\n}\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport App from './components/App'\nimport './index.css'\n\nReactDOM.render(\n  <React.StrictMode>\n    <div className=\"container\">\n      <App />\n    </div>\n  </React.StrictMode>,\n  document.getElementById('root'),\n)\n"],"sourceRoot":""}